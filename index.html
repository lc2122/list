<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebRTC Client</title>
</head>
<body>
  <video id="video" autoplay playsinline controls></video>
  <script>
    const video = document.getElementById('video');
      
    // WebSocket signaling
    const signalingServer = new WebSocket('ws://localhost:8080');
    signalingServer.onmessage = event => {
      const data = JSON.parse(event.data);
      console.log('Received message:', data);
    };

    // WebRTC Peer Connection
    const configuration = {
      iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
    };

    const peerConnection = new RTCPeerConnection(configuration);

    peerConnection.ontrack = event => {
      video.srcObject = event.streams[0];
    };

    // Create an offer
    peerConnection.createOffer()
      .then(offer => peerConnection.setLocalDescription(offer))
      .then(() => {
        signalingServer.send(JSON.stringify({
          type: 'offer',
          offer: peerConnection.localDescription
        }));
      });
  </script>
</body>
</html>
